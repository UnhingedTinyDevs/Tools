# PointSampler
The point sampler leverages [Birdsons Algorithm](https://www.cs.ubc.ca/~rbridson/docs/bridson-siggraph07-poissondisk.pdf) for efficient calculations of points following a [Poisson Disk Distribution](https://www.numberanalytics.com/blog/poisson-disk-sampling-essentials).

- [PoissonSettings](#poissonsettings)
- [PoisonDisc](#poissondisc)
- [PointSampler](#pointsampler)
- [Examples](#examples)

## Nodes that extend PointSampler
- [Spawner](./Spawner/README.md): used to spawn in different [PackedScenes](https://docs.godotengine.org/en/stable/classes/class_packedscene.html)

## PoissonSettings
These are the variables that will determine how the [PoissonDisc](#poissondisc) class will generate the points. You can use the [PointSampler](#pointsampler) to view the changes live in the editor.

### DEFAULT_POINT_DEBUG_UID ([String](https://docs.godotengine.org/en/stable/search.html?q=String&check_keywords=yes&area=default)) 
The default uid string that will be used when drawing points to the screen. 

```
const DEFAULT_POINT_DEBUG_UID: String = "uid://bh1llhygf5hh8"
```

### min_distance ([float](https://docs.godotengine.org/en/stable/classes/class_float.html))
The minimum distance between points. Increase this value for a more sparse distribution.

```gdscript
@export var min_distance: float = 100.0: set = set_min_dist
```

### max_dist_mult ([float](https://docs.godotengine.org/en/stable/classes/class_float.html))
A multiplier that determines the maximum distance a point can be from another.

```gdscript
@export var max_dist_mult: float = 2.0: set = set_max_dist_mult
```

### point_scene ([PackedScene](https://docs.godotengine.org/en/stable/classes/class_packedscene.html))
The scene you want to use as a debug visual . By default it is set to [DEFAULT_POINT_DEBUG_UID](#default_point_debug_uid) .

```gdscript
@export var point_scene: PackedScene = preload(DEFAULT_POINT_DEBUG_UID): set = set_point_scene
```

### max_attempts ([int](https://docs.godotengine.org/en/stable/classes/class_int.html))
The max number of attempt to find a position for a neighbor node from the current active node. Increasing this to much will effect performance.

```gdscript 
@export var max_attempts: int = 20: set = set_max_attempts
```

### shape ([Shape2D](https://docs.godotengine.org/en/stable/classes/class_shape2d.html))
This is the shape that points will be limited. Most of the time I would recommend just getting the shape from an [Area2D](https://docs.godotengine.org/en/stable/classes/class_area2d.html) .

```gdscript
@export var shape: Shape2D: set = set_shape
```


## PoissonDisc
This is the class in charge of running the algorithm it is given a [PoissonSettings](#poissonsettings) resource which determines how the sampling is done.
you can get a list of points generated by the algorithm by using the following code.

```gdscript
@export var shape: Shape2D
@export var settings: PoissonSetting

def _ready() -> void:
	var poisson_disk := PoissonDisc.new(settings)
	poisson_disk.run()
	print(poisson_disk.get_points())
```

and this is basically all the [PointSampler](#pointsampler) does is generate points on startup and when settings change and draw them to the screen. 


## PointSampler
The point sampler is an [Area2D](https://docs.godotengine.org/en/stable/classes/class_area2d.html()) that when given [PoissonSettings](#poissonsettings) will generate points using [PoissonDisc](#poissondisc) class. This allows you to visually define different distributions and save there settings so that you can swap them out easily.

### How To
1. add the  **Sampler Node** to the scene tree
2. give the **Sampler Node** a [PoissonSettings](#poissonsettings).
3. add **SamplerShape Node** as a child of the **SamplerNode**

## Examples
### Larger Circle
![PointSampler Circle](./assets/images/point_sampler_circle.png)

### Smaller Rectangle
![PointSampler Rectangle](./assets/images/point_sampler_rect.png)
